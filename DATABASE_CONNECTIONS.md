# üóÑÔ∏è Database Connections Generated by Each Module

## üìä Overview

This document outlines the database connections and configurations generated by each module in the CodeCraft backend generator system.

---

## üéØ **1. ERD-Based Backend Generation**

### **Database Type**: PostgreSQL
### **ORM**: Sequelize
### **Generated Files**:
- `config/database.js` - Database connection configuration
- `services/databaseService.js` - Database service class
- `.env` - Environment variables

### **Connection Details**:
```javascript
// Default PostgreSQL connection
DATABASE_URL=postgres://user:password@localhost:5432/airline_management
DB_HOST=localhost
DB_PORT=5432
DB_NAME=airline_management

// Connection code in databaseService.js
const sequelize = new Sequelize(process.env.DATABASE_URL || 'postgres://user:password@localhost:5432/airline_management');
```

### **Generated Models**:
- Passenger.js
- Flight.js
- Booking.js
- Airport.js
- Airline.js

### **Features**:
- ‚úÖ Automatic connection management
- ‚úÖ Error handling and reconnection
- ‚úÖ Environment-based configuration
- ‚úÖ Mongoose schema relationships

---

## üéØ **2. Prompt Analysis Module**

### **Database Type**: MongoDB
### **ORM**: Mongoose
### **Generated Files**:
- `models/authorization.js` - Authorization models
- `services/roleService.js` - Role management service
- `services/businessRuleEngine.js` - Business rules engine

### **Connection Details**:
```javascript
// Default MongoDB connection for authorization
MONGODB_URI=mongodb://localhost:27017/airline_management
DB_NAME=airline_management

// Connection in generated services
const mongoose = require('mongoose');
await mongoose.connect(process.env.MONGODB_URI);
```

### **Generated Models**:
- Role schema with permissions
- User schema with role assignments
- Business rule schema
- User access schema

### **Features**:
- ‚úÖ Role-based access control
- ‚úÖ Business rule enforcement
- ‚úÖ User permission management
- ‚úÖ Audit logging capabilities

---

## üéØ **3. NodeGen Advanced Generator**

### **Database Type**: PostgreSQL
### **ORM**: Sequelize
### **Generated Files**:
- `src/config/db.js` - Database configuration
- `src/database/migrations/` - Database migrations
- `src/database/seeders/` - Database seeders
- `.env` - Environment variables

### **Connection Details**:
```javascript
// PostgreSQL connection
DATABASE_URL=postgres://user:password@localhost:5432/advanced_backend
DB_HOST=localhost
DB_PORT=5432
DB_NAME=advanced_backend

// Sequelize configuration
const sequelize = new Sequelize(
    process.env.DATABASE_URL || 'postgres://user:password@localhost:5432/advanced_backend',
    {
        dialect: 'postgres',
        logging: (msg) => logger.debug(msg),
        pool: {
            max: 5,
            min: 0,
            acquire: 30000,
            idle: 10000
        }
    }
);
```

### **Generated Features**:
- ‚úÖ Database migrations
- ‚úÖ Seeders for sample data
- ‚úÖ Connection pooling
- ‚úÖ Transaction support
- ‚úÖ Model associations

---

## üéØ **4. NodeGen Basic Generator**

### **Database Type**: MongoDB
### **ORM**: Mongoose
### **Generated Files**:
- `src/db.js` - Database connection
- `src/models/` - Mongoose models
- `.env` - Environment variables

### **Connection Details**:
```javascript
// MongoDB connection
MONGODB_URI=mongodb://localhost:27017/backend_db
DB_NAME=backend_db

// Connection code
const mongoose = require('mongoose');
await mongoose.connect(process.env.MONGODB_URI);
```

### **Generated Features**:
- ‚úÖ Simple MongoDB connection
- ‚úÖ Mongoose models based on ERD
- ‚úÖ Basic CRUD operations
- ‚úÖ Schema validation

---

## üéØ **5. Modify Backend (Prompt Analysis)**

### **Database Type**: MongoDB
### **ORM**: Mongoose
### **Generated Files**:
- `middleware/auth.js` - Authentication middleware
- `models/authorization.js` - Authorization models
- `services/roleService.js` - Role management
- `services/businessRuleEngine.js` - Business rules

### **Connection Details**:
```javascript
// MongoDB connection for enhanced backend
MONGODB_URI=mongodb://localhost:27017/enhanced_backend
DB_NAME=enhanced_backend

// Connection in generated services
const mongoose = require('mongoose');
await mongoose.connect(process.env.MONGODB_URI);
```

### **Generated Features**:
- ‚úÖ Enhanced authentication
- ‚úÖ Role-based access control
- ‚úÖ Business rule enforcement
- ‚úÖ User permission management

---

## üéØ **6. Generate Hierarchy (Prompt Analysis)**

### **Database Type**: MongoDB
### **ORM**: Mongoose
### **Generated Files**:
- `hierarchy/role_hierarchy.js` - Role hierarchy management
- `services/roleService.js` - Role service
- `models/authorization.js` - Authorization models

### **Connection Details**:
```javascript
// MongoDB connection for hierarchy
MONGODB_URI=mongodb://localhost:27017/hierarchy_backend
DB_NAME=hierarchy_backend

// Connection in generated services
const mongoose = require('mongoose');
await mongoose.connect(process.env.MONGODB_URI);
```

### **Generated Features**:
- ‚úÖ Role hierarchy management
- ‚úÖ Permission inheritance
- ‚úÖ Role-based access control
- ‚úÖ User role assignments

---

## üéØ **7. Generate Authorization Code (Prompt Analysis)**

### **Database Type**: MongoDB
### **ORM**: Mongoose
### **Generated Files**:
- `auth/comprehensive_auth.js` - Comprehensive authentication
- `models/authorization.js` - Authorization models
- `services/roleService.js` - Role management
- `services/businessRuleEngine.js` - Business rules

### **Connection Details**:
```javascript
// MongoDB connection for authorization
MONGODB_URI=mongodb://localhost:27017/auth_backend
DB_NAME=auth_backend

// Connection in generated services
const mongoose = require('mongoose');
await mongoose.connect(process.env.MONGODB_URI);
```

### **Generated Features**:
- ‚úÖ Comprehensive authentication system
- ‚úÖ JWT token management
- ‚úÖ Role-based access control
- ‚úÖ Business rule enforcement

---

## üéØ **8. Security Suggestions (Prompt Analysis)**

### **Database Type**: MongoDB
### **ORM**: Mongoose
### **Generated Files**:
- Security analysis results (JSON)
- Security recommendations
- Vulnerability assessments

### **Connection Details**:
```javascript
// MongoDB connection for security analysis
MONGODB_URI=mongodb://localhost:27017/security_backend
DB_NAME=security_backend

// Connection in generated services
const mongoose = require('mongoose');
await mongoose.connect(process.env.MONGODB_URI);
```

### **Generated Features**:
- ‚úÖ Security vulnerability analysis
- ‚úÖ Security recommendations
- ‚úÖ Security score calculation
- ‚úÖ Security best practices

---

## üìä **Database Connection Summary**

| Module | Database Type | ORM | Default Connection | Features |
|--------|---------------|-----|-------------------|----------|
| **ERD Backend** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/airline_management` | Full CRUD, Relationships |
| **Prompt Analysis** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/airline_management` | Auth, Roles, Business Rules |
| **NodeGen Advanced** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/advanced_backend` | Migrations, Seeders, Pooling |
| **NodeGen Basic** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/backend_db` | Simple CRUD, Validation |
| **Modify Backend** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/enhanced_backend` | Enhanced Auth, RBAC |
| **Generate Hierarchy** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/hierarchy_backend` | Role Hierarchy, Inheritance |
| **Generate Auth Code** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/auth_backend` | Comprehensive Auth, JWT |
| **Security Suggestions** | PostgreSQL | Sequelize | `postgres://user:password@localhost:5432/security_backend` | Security Analysis, Recommendations |

---

## üîß **Environment Variables**

### **PostgreSQL Connections**:
```bash
# PostgreSQL Configuration
DATABASE_URL=postgres://user:password@localhost:5432/database_name
DB_HOST=localhost
DB_PORT=5432
DB_NAME=database_name
DB_USER=user
DB_PASSWORD=password
```

### **Common Variables**:
```bash
# JWT Configuration
JWT_SECRET=your-secret-key
JWT_EXPIRES_IN=24h

# Server Configuration
PORT=3000
NODE_ENV=development

# Security
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
```

---

## üöÄ **Quick Start Guide**

### **For PostgreSQL-based backends**:
1. Install PostgreSQL
2. Create database: `createdb database_name`
3. Set `DATABASE_URL` in `.env`
4. Run migrations: `npm run migrate`
5. Seed database: `npm run seed`

---

## üìù **Notes**

- **PostgreSQL** is used for all generated backends for consistency and ACID compliance
- **Sequelize** ORM provides robust database management with migrations and seeders
- All connections include proper error handling and reconnection logic
- Environment variables are automatically generated in `.env` files
- Database names are derived from the project context (e.g., `airline_management`, `ecommerce_backend`)
- TypeScript support for type safety and modern development practices
